{% extends 'main.html' %}
{% load static %}

{% block content %}

<style>
  :root {
    --primary: #6366f1;
    --primary-dark: #4f46e5;
    --bg-start: #f0f5ff;
    --bg-end: #e0e7ff;
    --card: #ffffff;
    --text: #111827;
    --text-light: #64748b;
    --border: #e0e7ff;
  }

  body {
    background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%);
  }

  .projects-container {
    max-width: 1200px;
    margin: 4rem auto;
    padding: 0 1.5rem;
  }

  .page-title {
    text-align: center;
    font-size: 2.8rem;
    font-weight: 800;
    background: linear-gradient(90deg, var(--primary), #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 3rem;
  }

  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 2rem;
  }

  .project-card {
    background: var(--card);
    border-radius: 16px;
    overflow: hidden;
    border: 1px solid var(--border);
    transition: all 0.35s ease;
    box-shadow: 0 10px 25px rgba(99, 102, 241, 0.1);
  }

  .project-card:hover {
    transform: translateY(-12px);
    box-shadow: 0 20px 40px rgba(99, 102, 241, 0.2);
  }

  .project-img {
    width: 100%;
    aspect-ratio: 16/9;
    object-fit: cover;
  }

  .project-body {
    padding: 1.5rem;
  }

  .project-title {
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: 0.8rem;
    color: var(--primary);
  }

  .project-owner {
    color: var(--text-light);
    font-size: 0.95rem;
    margin-bottom: 1rem;
  }

  .project-stats {
    display: flex;
    justify-content: space-between;
    color: var(--text-light);
    font-size: 0.9rem;
  }
</style>

<div class="projects-container">
  <h1 class="page-title">Explore All Projects</h1>

  {% if projects %}
    <div class="projects-grid">
      {% for project in projects %}
        <a href="{% url 'project' project.id %}" class="project-card" style="text-decoration: none; color: inherit;">
          {% if project.featured_image %}
            <img src="{{ project.featured_image.url }}" alt="{{ project.title }}" class="project-img">
          {% else %}
            <div class="project-img" style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); display: flex; align-items: center; justify-content: center; color: white; font-size: 5rem;">
              {{ project.title|slice:":1" }}
            </div>
          {% endif %}

          <div class="project-body">
            <h3 class="project-title">{{ project.title }}</h3>
            <p class="project-owner">
              By {{ project.owner.name|default:project.owner.user.username|default:"Anonymous" }}
            </p>
            <div class="project-stats">
              <span><strong>{{ project.vote_ratio }}%</strong> Positive</span>
              <span>{{ project.vote_total }} votes</span>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <div style="text-align: center; padding: 5rem 0; color: var(--text-light);">
      <h3>No projects yet</h3>
      <p>Be the first to showcase your work!</p>
    </div>
  {% endif %}
</div>

{% endblock %}